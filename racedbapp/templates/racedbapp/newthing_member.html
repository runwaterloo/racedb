{% extends "racedbapp/base.html" %}
{% load static %}
{% load racedbapp_extras %}

{% block title %}
 New Thing
  |
{% endblock title %}

{% block ogmeta %}
  <meta property="og:type" content="website" />
  <meta property="og:title" content="RunWaterloo Results" />
  <meta property="og:description" content="Explore results and records for every RunWaterloo event." />
  <meta property="og:image" content="{% static "ogimage.png" %}" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <script src="{% static "jquery.filtertable.min.js" %}"></script>
{% endblock ogmeta %}

{% block content %}

<div class="row">
  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
    <h3>New Thing {{ year }} <small><a href="http://www.runwaterloo.com" target="_blank"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span></a></h3></small>
    <h4>Score Report for:
      {% if member_results.active %}
        <a href="/member/{{ member_results.slug }}/">{{ member_results.athlete }}</a>
      {% else %}
        {{ member_results.athlete }}
      {% endif %}
    </h4>
    <h5>Total Points:
    <strong>{{ member_results.total_points|floatformat:"2" }}</strong>
    &nbsp;|&nbsp;Event Finishes:
    {{ member_results.results|length }}</h5>
    <h5>Gender Place:
    {{ member_results.gender_place }}
    &nbsp;|&nbsp;Category Place:
    {{ member_results.category_place }}</h5>
  </div>
</div>


<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <table class="table table-bordered table-condensed table-striped">
      <tr class="info">
        <th class="text-center">Event</th>
        <th class="text-center">Time</th>
        <th class="text-center">GP</th>
        <th class="text-center">Finish</th>
        <th class="text-center">Merit</th>
        <th class="text-center">Boosters</th>
        <th class="text-center">Points</th>
        <th class="text-center">Counts</th>
      </tr>
      {% for i in member_results.results %}
        <tr>
          <td><a href="/event/{{ year }}/{{ i.event_race_slug }}/{{ i.event_distance_slug }}/">{{ i.event_race_short_name }} {{ i.event_distance_name }}</a></td>
          <td class="text-center">{{ i.guntime|get_time }}</td>
          <td class="text-center">{{ i.gender_place }}/{{ i.gender_finishers }}</td>
          <td class="text-center">{{ i.pp|floatformat:"0" }}</td>
          <td class="text-center">{{ i.mp|floatformat:"2" }}</td>
          <td class="text-center">
            {% if i.ditto_boost > 0 %}
                <span class="glyphicon glyphicon-repeat" title="Ditto {% widthratio boosters.ditto_boost 1 100 %}%" style="color:maroon" aria-hidden="true"></span>
            {% endif %}
            {% if i.pb_boost > 0 %}
                <span class="glyphicon glyphicon-time" title="RunWaterloo PB {% widthratio boosters.pb_boost 1 100 %}%" style="color:blue" aria-hidden="true"></span>
            {% endif %}
            {% if i.classic_boost > 0 %}
                <span class="glyphicon glyphicon-asterisk" title="Classic Event {% widthratio boosters.classic_boost 1 100 %}%" style="color:orange" aria-hidden="true"></span>
            {% endif %}
          </td>
          <td class="text-center"><strong>{{ i.ep|floatformat:"2" }}</strong></td>
          <td class="text-center">
            {% if i.counts %}
              <span class="glyphicon glyphicon-ok" style="color:green" aria-hidden="true"></span>
            {% else %}
              <span class="glyphicon glyphicon-remove" style="color:red" aria-hidden="true"></span>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </table>
  </div>
</div>
<p>
<strong>Boosters</strong><br>
<span class="glyphicon glyphicon-repeat" style="color:maroon" aria-hidden="true"></span> = Ditto ({% widthratio boosters.ditto_boost 1 100 %}%) - Repeating a race from last year (any distance)<br>
<span class="glyphicon glyphicon-time" style="color:blue" aria-hidden="true"></span> = PB ({% widthratio boosters.pb_boost 1 100 %}%) - RunWaterloo PB for the distance<br>
<span class="glyphicon glyphicon-asterisk" style="color:orange" aria-hidden="true"></span> = Classic ({% widthratio boosters.classic_boost 1 100 %}%) - Finishing one of RunWaterloo's Classic races
</p>
{% endblock content %}
